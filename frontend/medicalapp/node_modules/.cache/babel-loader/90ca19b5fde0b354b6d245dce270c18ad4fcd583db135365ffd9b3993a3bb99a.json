{"ast":null,"code":"import _classCallCheck from\"D:/Medical/medical_app/frontend/medicalapp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Medical/medical_app/frontend/medicalapp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";import Config from\"./config\";import{reactLocalStorage}from'reactjs-localstorage';var AuthHandler=/*#__PURE__*/function(){function AuthHandler(){_classCallCheck(this,AuthHandler);}_createClass(AuthHandler,null,[{key:\"login\",value:function login(username,password,callback){axios.post(Config.loginURL,{username:username,password:password}).then(function(response){if(response.status===200){reactLocalStorage.set(\"token\",response.data.access);reactLocalStorage.set(\"refresh\",response.data.refresh);callback({error:false,message:\"Login Successfull...\"});}}).catch(function(error){console.log(error.response);callback({error:true,message:\"Error During Login Invalid Login Details..\"});});}},{key:\"loggedIn\",value:function loggedIn(){if(reactLocalStorage.get(\"token\")&&reactLocalStorage.get(\"refresh\")){return true;}else{return false;}}},{key:\"getLoginToken\",value:function getLoginToken(){return reactLocalStorage.get(\"token\");}},{key:\"getRefreshToken\",value:function getRefreshToken(){return reactLocalStorage.get(\"refresh\");}},{key:\"logoutUser\",value:function logoutUser(){reactLocalStorage.remove(\"token\");reactLocalStorage.remove(\"refresh\");}},{key:\"checkTokenExpiry\",value:function checkTokenExpiry(){var expire=false;var token=this.getLoginToken();var tokenArray=token.split(\".\");var jwt=JSON.parse(atob(tokenArray[1]));//console.log(jwt)\nif(jwt&&jwt.exp&&Number.isFinite(jwt.exp)){expire=jwt.exp*100;}else{expire=false;}if(!expire){return false;}return Date.now()>expire;}}]);return AuthHandler;}();export default AuthHandler;","map":{"version":3,"names":["axios","Config","reactLocalStorage","AuthHandler","_classCallCheck","_createClass","key","value","login","username","password","callback","post","loginURL","then","response","status","set","data","access","refresh","error","message","catch","console","log","loggedIn","get","getLoginToken","getRefreshToken","logoutUser","remove","checkTokenExpiry","expire","token","tokenArray","split","jwt","JSON","parse","atob","exp","Number","isFinite","Date","now"],"sources":["D:/Medical/medical_app/frontend/medicalapp/src/utils/AuthHandler.js"],"sourcesContent":["import axios from \"axios\"\r\nimport Config from \"./config\"\r\nimport {reactLocalStorage} from 'reactjs-localstorage'\r\n\r\nclass AuthHandler{\r\n    static login (username,password,callback){\r\n\r\n        axios.post(Config.loginURL,{username:username,password:password})\r\n        .then(function(response){\r\n            if(response.status===200){\r\n                reactLocalStorage.set(\"token\",response.data.access)\r\n                reactLocalStorage.set(\"refresh\",response.data.refresh)\r\n                callback({error:false,message:\"Login Successfull...\"})\r\n            }\r\n            \r\n        })\r\n        .catch(function(error){\r\n            console.log(error.response)\r\n            callback({error:true,message:\"Error During Login Invalid Login Details..\"})\r\n        })\r\n\r\n    }\r\n    static loggedIn(){\r\n        if(reactLocalStorage.get(\"token\") && reactLocalStorage.get(\"refresh\")){\r\n            return true\r\n        }else{\r\n            return false\r\n        }\r\n        \r\n    }\r\n\r\n    static getLoginToken(){\r\n        return reactLocalStorage.get(\"token\")\r\n    }\r\n    static getRefreshToken(){\r\n        return reactLocalStorage.get(\"refresh\")\r\n    }\r\n    static logoutUser(){\r\n        reactLocalStorage.remove(\"token\")\r\n        reactLocalStorage.remove(\"refresh\")\r\n    }\r\n\r\n    static checkTokenExpiry(){\r\n        var expire = false; \r\n        var token = this.getLoginToken();\r\n        var tokenArray = token.split(\".\");\r\n        var jwt=JSON.parse(atob(tokenArray[1]));\r\n        //console.log(jwt)\r\n        if(jwt && jwt.exp && Number.isFinite(jwt.exp)){\r\n            expire=jwt.exp*100\r\n        }else{\r\n            expire=false\r\n        }\r\n        if(!expire){\r\n            return false\r\n        }\r\n        return Date.now() > expire;\r\n    }\r\n}\r\n\r\nexport default AuthHandler"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}